<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/core/App.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/react-chunky/react-native-chunky" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">core</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/App.js~App.html">App</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/ListScreen.js~ListScreen.html">ListScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/core/Screen.js~Screen.html">Screen</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">errors</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-UNABLE_TO_LOAD_ROUTE">UNABLE_TO_LOAD_ROUTE</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">styles</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-containers">containers</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/core/App.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import { StackNavigator, TabNavigator, DrawerNavigator } from &apos;react-navigation&apos;
import React, { PureComponent } from &apos;react&apos;
import { Image } from &apos;react-native&apos;
import { Styles } from &apos;react-chunky&apos;

/**
 * The main React Native Chunky App instance is in charge of parsing the chunky.json
 * content and generating the app sections and navigators. This is the main entry point
 * for a Chunky mobile app. This class is not to be instantiated manually, but it is rather
 * invoked by the main Chunky AppContainer.
 * @extends {PureComponent}
 */
export default class App extends PureComponent {

  /**
   * This App constructor is not to be called manually, but it&apos;s injected by the Chunky AppContainer
   * @param {object} props the App gets its properties injected by the Chunky AppContainer
   */
  constructor(props) {
    super(props)

    this._initializeSections()
  }

  // createNavigationOptions(route, layout, assets) {
  //   var options = {
  //     title: route.title,
  //     header: {
  //       visible: !route.hideHeader,
  //       tintColor: Styles.styleColor(this.props.theme.tintColor || &quot;#FFFFFF&quot;),
  //       style: { backgroundColor:  Styles.styleColor(this.props.theme.navigationColor) },
  //     }
  //   }
  //
  //   if (route.hideBack) {
  //     options.header.left = () =&gt; {}
  //   }
  //
  //   if (layout === &apos;tabs&apos;) {
  //     options.tabBar = {
  //       label: route.title,
  //       icon: &lt;Image source={assets.icon}/&gt;
  //     }
  //   }
  //
  //   return options
  // }
  //
  // createScreenStack(screens) {
  //   return {
  //     screen: StackNavigator(screens),
  //     navigationOptions: {
  //       header: {
  //         style: { backgroundColor:  Styles.styleColor(this.props.theme.navigationColor) },
  //         left: () =&gt; {},
  //         style: { height: 0 }
  //       }
  //     }
  //   }
  // }
  //
  // createSectionChunk(sectionChunk) {
  //   let chunk, loadingRoutes, chunkName
  //
  //   if ( typeof sectionChunk === &apos;string&apos; ) {
  //     chunkName = sectionChunk
  //     chunk = this.props.chunks[chunkName]
  //     loadingRoutes = chunk.routes
  //   } else if ( typeof sectionChunk === &apos;object&apos; ) {
  //     chunkName = sectionChunk.chunk
  //     chunk = this.props.chunks[chunkName]
  //     loadingRoutes = {}
  //     sectionChunk.routes.forEach( item =&gt; {
  //       loadingRoutes[item] = item;
  //     })
  //   }
  // }

  _createSectionNavigatorRoute(route) {
    // console.log(route)
  }

  _createSectionNavigatorRoutes(section, element) {
    const [ chunkName, chunkFlavor ] = element.split(&quot;/&quot;)
    const iconName = `${chunkName}/${ chunkFlavor ? chunkFlavor : &apos;icon&apos; }`
    const chunk = this.props.chunks[chunkName]
    if (!chunk || !chunk.routes) {
      return
    }

    const chunkRoutes = chunk.routes

    for (let routeName in chunkRoutes) {
      var route = chunkRoutes[routeName]
      route.routeName = routeName
      // this.createSectionNavigatorRoute(route)
    }

    // chunkRoutes.map(route =&gt; {
      // console.log(route)
    // })
    // return Object.assign({chunkName, iconName}, chunkFlavor ? { chunkFlavor } : {})
  }

  _createSectionNavigator(section) {
    const layout = section.layout || &quot;default&quot;
    const stack = section.stack || []
    const sectionName = section.sectionName || &quot;default&quot;
    var routes = {}

    stack.forEach(element =&gt; {
      if (element &amp;&amp; typeof element === &apos;string&apos;) {
        routes = Object.assign({}, routes, this._createSectionNavigatorRoutes(section, element))
        return
      }

      if (element &amp;&amp;  Array.isArray(element) &amp;&amp; element.length &gt; 0) {
        element.forEach(subElement =&gt; {
          routes = Object.assign({}, routes, this._createSectionNavigatorRoutes(section, subElement))
        })
        return
      }
    })

    console.log(sectionName, routes)
    // const navigator =
    // switch(layout) {
    //     case &apos;tabs&apos;:
    //       navigators = Object.assign({}, navigators, { [sectionName]: { screen: TabNavigator(screens) }})
    //       break
    //     case &apos;drawer&apos;:
    //       navigators = Object.assign({}, navigators, { [sectionName]: { screen: DrawerNavigator(screens) }})
    //       break;
    //     default:
    //       navigators = Object.assign({}, navigators, screens)
    //       break;
    //   }
    // return StackNavigator(routes)
  }

  _initializeSections() {
    for(const sectionName in this.props.sections) {
      // Look through all the app&apos;s sections and for each, build a navigator
      var section = this.props.sections[sectionName]
      section.sectionName = sectionName
      const navigator = this._createSectionNavigator(section)
    }
  }

  // init() {
  //   var navigators = {}
  //   for(const sectionName in this.props.sections) {
  //     const section = this.props.sections[sectionName]
  //     const layout = section.layout || &quot;default&quot;
  //     var screens = {}
  //     let chunk, loadingRoutes, chunkName
  //
  //     section.chunks.forEach( (sectionChunk, index) =&gt; {
  //
  //       if ( typeof sectionChunk === &apos;string&apos; ) {
  //         chunkName = sectionChunk
  //         chunk = this.props.chunks[chunkName]
  //         loadingRoutes = chunk.routes
  //       } else if ( typeof sectionChunk === &apos;object&apos; ) {
  //         chunkName = sectionChunk.chunk
  //         chunk = this.props.chunks[chunkName]
  //         loadingRoutes = {}
  //         sectionChunk.routes.forEach( item =&gt; {
  //           loadingRoutes[item] = item;
  //         })
  //       }
  //
  //       var chunkScreens = {}
  //
  //         for(const routeName in loadingRoutes) {
  //
  //           const route = chunk.routes[routeName]
  //           const screenProps = Object.assign({
  //             transitions: route.transitions,
  //             theme: this.props.theme
  //           }, route.props || {})
  //           var screen = (props) =&gt; &lt;route.screen {...props} {...screenProps}/&gt;
  //           const path = `${chunkName}/${routeName}`
  //
  //           const navigationOptions = this.createNavigationOptions(route, layout, chunk.assets)
  //
  //           if (layout === &apos;tabs&apos;) {
  //             chunkScreens[path] = { screen, navigationOptions }
  //           } else {
  //             screens[path] = { screen, navigationOptions}
  //           }
  //         }
  //
  //         if (Object.keys(chunkScreens).length &gt; 0) {
  //           screens[`${index}_${chunkName}`] = this.createScreenStack(chunkScreens)
  //         }
  //     })
  //
  //     this._navigator = this._navigator || {}
  //     switch(layout) {
  //       case &apos;tabs&apos;:
  //         navigators = Object.assign({}, navigators, { [sectionName]: { screen: TabNavigator(screens) }})
  //         break
  //       case &apos;drawer&apos;:
  //         navigators = Object.assign({}, navigators, { [sectionName]: { screen: DrawerNavigator(screens) }})
  //         break;
  //       default:
  //         navigators = Object.assign({}, navigators, screens)
  //         break;
  //     }
  //   }
  //
  //   this._navigator = StackNavigator(navigators)
  // }

  get navigator() {
    return this._navigator
  }

  render() {
    const Content = this.navigator
    return &lt;Content/&gt;
  }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.5.2)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
